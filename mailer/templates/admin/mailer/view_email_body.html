{% extends "admin/base_site.html" %}
{% load i18n admin_urls static admin_modify %}

{% block title %}{{ title }} | {{ site_title|default:_('Django site admin') }}{% endblock %}

{% block breadcrumbs %}
<div class="breadcrumbs">
<a href="{% url 'admin:index' %}">{% trans 'Home' %}</a>
&rsaquo; <a href="{% url 'admin:mailer_emailsent_changelist' %}">{% trans 'Email sent' %}</a>
&rsaquo; {{ title }}
</div>
{% endblock %}

{% block content %}
<div class="module aligned">
    <h1>{{ title }}</h1>
    
    <div class="form-row">
        <div>
            <label><strong>To:</strong></label>
            <p>{{ email_sent.to_email }}</p>
        </div>
    </div>
    
    <div class="form-row">
        <div>
            <label><strong>Subject:</strong></label>
            <p>{{ email_sent.subject }}</p>
        </div>
    </div>
    
    <div class="form-row">
        <div>
            <label><strong>Sent At:</strong></label>
            <p>{{ email_sent.sent_at|date:"F d, Y H:i" }}</p>
        </div>
    </div>
    
    <div class="form-row">
        <div>
            <label><strong>Status:</strong></label>
            <p>
                {% if email_sent.status == 'sent' %}
                    <span style="color: green; font-weight: bold;">✓ Sent</span>
                {% else %}
                    <span style="color: red; font-weight: bold;">✗ Failed</span>
                {% endif %}
            </p>
        </div>
    </div>
    
    <hr>
    
    <div class="form-row">
        <div>
            <label><strong>Email Body:</strong></label>
            <div style="background-color: #f8f8f8; padding: 15px; border: 1px solid #ddd; border-radius: 4px; white-space: pre-wrap; font-family: monospace;">{{ email_sent.body }}</div>
        </div>
    </div>
    
    <div class="submit-row">
        <a href="{% url 'admin:mailer_emailsent_change' email_sent.pk %}" class="button">Back to Email</a>
        <a href="{% url 'admin:mailer_emailsent_changelist' %}" class="button cancel-link">Back to List</a>
        {% if email_sent.status == 'failed' %}
            <a href="{% url 'admin:resend_email' email_sent.pk %}" class="button" style="background-color: #28a745; color: white;">Resend Email</a>
        {% endif %}
    </div>
</div>

<style>
.form-row {
    margin-bottom: 15px;
}
.form-row label {
    display: block;
    margin-bottom: 5px;
    font-weight: bold;
}
.submit-row {
    margin-top: 20px;
    padding-top: 20px;
    border-top: 1px solid #ddd;
}
.submit-row .button {
    background-color: #417690;
    color: white;
    padding: 10px 20px;
    text-decoration: none;
    border-radius: 4px;
    margin-right: 10px;
}
.submit-row .button:hover {
    background-color: #205067;
}
.cancel-link {
    background-color: #ba2121;
}
.cancel-link:hover {
    background-color: #a41515;
}
</style>
{% endblock %}
